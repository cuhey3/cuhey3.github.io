<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body {
            background-color: black;
        }
        body, svg {
            margin: 0;
            padding: 0;
        }
        svg {
            border: 1px solid white;
        }
    </style>
</head>
<body>
<svg width="800" height="600" id="battle" display="none">
    <text x="100" y="420" font-size="160">🟡</text>
    <text x="600" y="200" font-size="170">🙎‍♀️</text>
    <text x="50" y="65" fill="white" font-size="30">ピエン</text>
    <text x="60" y="110" fill="white" font-size="30">HP:</text>
    <line x1="40" y1="80" x2="40" y2="130" fill="white" stroke="white" stroke-width="5"></line>
    <line x1="440" y1="130" x2="40" y2="130" fill="white" stroke="white" stroke-width="5"></line>
    <line x1="440" y1="130" x2="395" y2="120" fill="white" stroke="white" stroke-width="5"></line>
    <rect x="120" y="90" rx="10" ry="10" height="20" width="200" fill="green" stroke="white"></rect>
    <rect x="120" y="90" rx="10" ry="10" height="20" width="270" fill="none" stroke="white"></rect>
    <rect x="20" y="475" stroke="white" height="110" width="760"></rect>
    <text x="40" y="519" fill="white" font-size="30" id="battle-message-1"></text>
    <text x="40" y="564" fill="white" font-size="30" id="battle-message-2"></text>
    <rect x="580" y="475" stroke="white" height="110" width="200"></rect>
    <text x="640" y="520" fill="white" font-size="30">たたかう</text>
    <text x="640" y="560" fill="white" font-size="30">にげる</text>
    <text x="613" y="525" fill="white" font-size="40" text-anchor="middle" id="command-cursor">👉</text>
    <g transform="translate(340, 300)">
        <text x="60" y="65" fill="white" font-size="30">スマイリー</text>
        <text x="70" y="110" fill="white" font-size="30">HP:</text>
        <line x1="420" y1="80" x2="420" y2="130" fill="white" stroke="white" stroke-width="5"></line>
        <line x1="420" y1="130" x2="30" y2="130" fill="white" stroke="white" stroke-width="5"></line>
        <line x1="25" y1="130" x2="70" y2="120" fill="white" stroke="white" stroke-width="5"></line>
        <rect x="130" y="90" rx="10" ry="10" height="20" width="270" fill="green"></rect>
    </g>
</svg>
<svg width="800" height="600" id="title" display="none">
    <text x="400" y="200" font-size="60" fill="white" text-anchor="middle">SVG QUEST</text>
    <text x="400" y="300" fill="white" font-size="30" text-anchor="middle">START</text>
    <text x="400" y="360" fill="white" font-size="30" text-anchor="middle">EXIT</text>
    <text x="305" y="309" fill="white" font-size="50" text-anchor="middle" id="title-cursor">👉</text>
</svg>
<svg width="800" height="600" id="field" display="none">
    <rect x="320" y="120" fill="orange" height="40" width="40" class="treasure-box"></rect>
    <rect x="40" y="240" fill="orange" height="40" width="40" class="treasure-box"></rect>
    <text x="322" y="153" fill="black" font-size="35">宝</text>
    <text x="42" y="273" fill="black" font-size="35">宝</text>
    <rect x="80" y="80" fill="red" height="40" width="40" id="enemy-cursor1" class="enemy-cursor"></rect>
    <rect x="440" y="320" fill="red" height="40" width="40" id="enemy-cursor2" class="enemy-cursor"></rect>
    <text x="82" y="113" fill="black" font-size="35">敵</text>
    <text x="442" y="353" fill="black" font-size="35">敵</text>
    <rect x="320" y="200" fill="white" height="40" width="40" id="character-cursor"></rect>
    <text x="320" y="235" fill="black" font-size="40" id="character-direction">↓</text>
</svg>
<svg width="800" height="600" id="menu" display="none" style="position: absolute; top:0; left:0">
    <rect x="480" y="50" width="220" height="255" stroke="white" stroke-width="5" fill="black"></rect>
    <text x="545" y="100" fill="white" font-size="30">どうぐ</text>
    <text x="545" y="145" fill="white" font-size="30">そうび</text>
    <text x="545" y="190" fill="white" font-size="30">セーブ</text>
    <text x="545" y="235" fill="white" font-size="30">タイトル</text>
    <text x="545" y="280" fill="white" font-size="30">とじる</text>
    <text x="518" y="105" fill="white" font-size="40" text-anchor="middle" id="menu-cursor">👉</text>
    <svg id="inventory" display="none">
        <rect x="300" y="120" width="400" height="300" stroke="white" stroke-width="5" fill="black"></rect>
        <text x="365" y="170" fill="white" font-size="30" id="inventory-1"></text>
        <text x="365" y="215" fill="white" font-size="30" id="inventory-2"></text>
        <text x="338" y="175" fill="white" font-size="40" text-anchor="middle" id="inventory-cursor">👉</text>
        <svg id="inventory-confirm" display="none">
            <rect x="520" y="360" width="180" height="60" stroke="white" stroke-width="5" fill="black"></rect>
            <text x="590" y="400" fill="white" font-size="30">つかう</text>
            <text x="563" y="405" fill="white" font-size="40" text-anchor="middle">👉</text>
        </svg>
    </svg>
</svg>
<svg width="800" height="600" id="message" display="none" style="position: absolute; top:0; left: 0;">
    <rect x="20" y="475" stroke="white" height="110" width="760"></rect>
    <text x="40" y="519" fill="white" font-size="30" id="message-1"></text>
    <text x="40" y="564" fill="white" font-size="30" id="message-2"></text>
</svg>
<svg width="800" height="600" id="fader" display="block" style="position: absolute; top:0; left: 0;">
    <rect x="0" y="0" width="800" height="600" fill="black" fill-opacity="0"></rect>
</svg>
<script type="module">
    import init, {Engine} from "./pkg/rpg_lib.js";

    await init();
    const engine = new Engine();
    engine.init();
    window.onkeydown = (event) => {
        engine.keydown(event.key);
    }
    function animate(step) {
        engine.animate(step);
        window.requestAnimationFrame(animate);
    }
    window.requestAnimationFrame(animate);

</script>
</body>
</html>